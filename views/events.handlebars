<link rel="stylesheet" href="/css/events.css" />

{{#if error}}
  <p class="error">{{error}}</p>
{{/if}}

<h2>Events</h2>
<div class>
<ul class="event-links">
  <li>
    <a href="/events" class="{{#if activeCategoryIsAll}}active{{/if}}">All</a>
  </li>
  {{#each categories}}
    <li>
      <a href="/events/category/{{id}}" class="{{#ifEquals id ../activeCategory}}active{{/ifEquals}}">
        {{name}}
      </a>
    </li>
  {{/each}}
</ul>
</div>

<div>
  <h1>List of Events</h1>
  <div>
    {{#if session.isAdmin}}
      <p>
        <form style="display:inline" method="GET" action="/events/new">
          <button type="submit" class="important">New Event</button>
        </form>
      </p>

    {{/if}}
    <ul>
      {{#each events}}
        <li><a href="/events/{{id}}">{{title}}</a>:
          {{description}}
          {{location}}
          Date:
          {{date}}.
          Category: {{category_name}}
        {{#if ../session.isAdmin}}
          <form style="display:inline" method="GET" action="/events/modify/{{id}}">
          <button type="submit" class="important">Edit</button>
          </form>
          <form style="display:inline" method="POST" action="/events/delete/{{id}}">
          <button type="submit" class="important">Remove</button>
          </form>
        {{/if}}
          </li>
      {{/each}}
    </ul>
    <p>
      <a href="/events?page=1">First</a>
      {{#if hasPrevPage}}
      <a href="/events?page={{prevPage}}">Previous</a>
      {{/if}}

      {{#each pages}}
      <a href="/events?page={{this}}">{{this}}</a>
      {{/each}}

      {{#if hasNextPage}}
      <a href="/events?page={{nextPage}}">Next</a>
      {{/if}}
      <a href="/events?page={{totalPages}}">Last</a>
    </p>
    {{#if error}}
      <p class="error">{{error}}</p>
    {{/if}}
  </div>
</div>
